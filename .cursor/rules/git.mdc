---
description: Apply this rule to the entire repository
globs: 
alwaysApply: true
---
あなたは高度な問題解決能力を持つAIアシスタントです。以下の指示に従って、効率的かつ正確にタスクを遂行してください。

まず、ユーザーから受け取った指示を確認します：
<指示>
{{instructions}}
<!-- このテンプレート変数はユーザーの入力プロンプトに自動置換されます -->
</指示>

この指示を元に、以下のプロセスに従って作業を進めてください：

---

# Git運用ルール

## 1. ブランチ戦略

### メインブランチ
- `master`: 本番環境用ブランチ
  - 常に動作可能な状態を維持
  - リリース可能なコードのみを保持

### 開発ブランチ
- `feature/<機能名>`: 新機能開発用
  - 完了後はPRを作成して`master`へマージ
  - 命名規則: 機能の概要を簡潔に記述

## 2. コミット規約

### コミットメッセージ形式
- Conventional Commits形式を採用
  - 例: `feat: ユーザー認証機能の追加`
  - 例: `fix: ログイン時のバグ修正`
  - 例: `docs: READMEの更新`

### コミットの原則
- 1機能 = 1コミット
- コミットメッセージは日本語で記述
- 変更内容が明確に分かるように記述
- **指示なきコミットは禁止** - ユーザーからの明示的な指示がある場合のみコミットを実行

## 3. バージョン管理

### タグ付け
- リリース時: `vX.Y.Z`形式
  - X: メジャーバージョン
  - Y: マイナーバージョン
  - Z: パッチバージョン

### タグの作成と反映
```bash
git tag v1.0.0
git push --tags
```

## 4. Git除外設定

### .gitignore必須項目
```
# 依存関係
node_modules/
venv/
.env

# ログ・データ
logs/
volumes/

# セキュリティ
*.key
*.pem
*.cert

# ビルド成果物
dist/
build/
```

## 5. 開発フロー

### 新機能開発
```bash
# 1. 開発ブランチ作成
git checkout -b feature/新機能名

# 2. 開発作業
# コード編集 → コミット

# 3. プッシュとPR作成
git push -u origin feature/新機能名
```

### メインブランチ更新時
```bash
git checkout master
git pull
```

## 6. 品質管理チェックリスト

### 環境一貫性
- [ ] ローカル環境とCI環境の一致
- [ ] 環境変数の適切な管理

### セキュリティ
- [ ] 機密情報の適切な管理
- [ ] 最小権限の原則
- [ ] 定期的なセキュリティアップデート

---

>  **注意事項**
> - このルールは随時更新される可能性があります
> - 変更は必ずPRを通じてレビューを受けてください
> - 不明な点はチームで確認してください 
> - 現在、リモートリポジトリは使用していません

## 7. PowerShell環境でのコマンド実行

### 7.1 適切なコマンド実行方法

#### 短縮版コマンドの使用
```bash
# ステータス確認（短縮版）
git status --porcelain

# コミット（出力を最小限に）
git commit -m "メッセージ" --quiet

# ログ表示（最新5件のみ）
git log --oneline -5
```

#### 出力の制限
```bash
# 変更ファイル数のみ表示
git status --short

# コミット履歴を簡潔に表示
git log --oneline --graph -10

# 差分を簡潔に表示
git diff --stat
```

### 7.2 PowerShellでの中断方法

#### 適切な中断コマンド
- `Ctrl+C`: 現在実行中のコマンドを中断
- `Ctrl+Z`: バックグラウンドに送信（一部のコマンドで）
- `exit`: PowerShellセッションを終了

#### 避けるべきコマンド
- `q^D`: PowerShellでは機能しない不適切なコマンド
- `q`（単独）: 一部のコマンドでのみ有効

### 7.3 効率的なGit操作

#### 日常的な操作
```bash
# ステータス確認（効率的版）
git status --porcelain

# 変更をステージング
git add .

# コミット（静寂モード）
git commit -m "feat: 機能追加" --quiet

# ブランチ切り替え
git checkout feature/新機能名
```

#### トラブルシューティング
```bash
# 強制中断後の状態確認
git status --porcelain

# コミット履歴の確認
git log --oneline -3

# 変更の取り消し
git reset --soft HEAD~1
```

### 7.4 推奨するワークフロー

1. **作業開始時**
   ```bash
   git status --porcelain  # 現在の状態確認
   ```

2. **変更後**
   ```bash
   git add .  # 変更をステージング
   git commit -m "feat: 変更内容" --quiet  # コミット
   ```

3. **作業完了時**
   ```bash
   git log --oneline -3  # 最新のコミット確認
   ```

### 7.5 注意事項
- PowerShellでは`q^D`は使用しない
- 長い出力が予想される場合は短縮版コマンドを使用
- 処理が止まった場合は`Ctrl+C`で中断
- コミット時は`--quiet`オプションで出力を最小限に
>  **注意事項**
> - このルールは随時更新される可能性があります
> - 変更は必ずPRを通じてレビューを受けてください
> - 不明な点はチームで確認してください 
> - 現在、リモートリポジトリは使用していません