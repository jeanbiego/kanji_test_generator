
## ディレクトリ説明

### ルートディレクトリ
- `.cursor/`: Cursor IDEの設定ファイルを格納
- `.git/`: Gitリポジトリの設定ファイル
- `.mypy_cache/`: mypyのキャッシュファイル
- `docs/`: プロジェクトのドキュメントを格納
- `logs/`: ログファイル
  - `{module_name}_{timestamp}.log`: モジュールごとの通常ログファイル
  - `{module_name}_error.log`: モジュールごとのエラーログファイル
- `src/`: ソースコードを格納
- `tests/`: テストコードを格納
- `.gitignore`: Gitの除外設定ファイル
- `.pylintrc`: pylintの設定ファイル
- `mypy.ini`: mypyの設定ファイル
- `requirements.txt`: Pythonパッケージの依存関係定義
- `setup.cfg`: flake8の設定ファイル
- `README.md`: プロジェクト説明書

### src/
- `__init__.py`: Pythonパッケージ初期化ファイル
- `app.py`: Streamlitエントリーポイント
  - メインアプリケーションの起動
  - ページ構成の管理
  - UIコンポーネントの統合
  - エラーハンドリング統合
- `modules/`: 機能別モジュール
  - `__init__.py`: モジュールパッケージ初期化ファイル
  - `models.py`: データクラス・型定義・ID採番
    - `Problem`クラス: 問題データの管理
    - `Attempt`クラス: 試行データの管理
    - UUID採番機能
    - 正規化（カタカナ化）機能
  - `storage.py`: CSV入出力機能
    - 問題マスタの読み書き
    - 試行ログの読み書き
    - 重複チェック機能
    - エラーハンドリング
  - `rendering.py`: 置換・プレビュー機能
    - 文章内の漢字をカタカナ読みに置換
    - プレビュー文字列生成
    - 解答欄の空白化
  - `print_page.py`: 印刷用ページ生成
    - Jinja2テンプレート処理
    - 印刷用HTML生成
    - ブラウザ印刷機能との連携
  - `validators.py`: 入力バリデーション
    - 文章の空チェック
    - 回答漢字の存在チェック
    - 読みの形式チェック（ひらがな/カタカナ）
  - `utils.py`: 共通処理
    - 日時処理
    - 文字列正規化
    - 共通ユーティリティ関数
- `templates/`: HTMLテンプレート
  - `print_page.html`: 印刷用ページテンプレート
    - テストシートのレイアウト
    - ヘッダー（タイトル、氏名欄、日付）
    - 問題表示エリア
    - 解答欄の罫線
    - フッター（ページ番号）
    - 印刷用CSS連携
- `assets/`: 静的ファイル
  - `print.css`: 印刷用CSS
    - @media printクエリで印刷レイアウト最適化
    - A4サイズ対応
    - ブラウザ印刷機能との連携
- `data/`: データファイル
  - `problems.csv`: 問題マスタ
    - 初回は空ファイル（ヘッダのみ）
    - 問題の文章、回答漢字、読み、作成日時を管理
  - `attempts.csv`: 試行ログ
    - 初回は空ファイル（ヘッダのみ）
    - 試行日、問題ID、正誤を管理

### tests/
- `__init__.py`: テストパッケージ初期化ファイル
- `test_models.py`: モデルクラスのテスト
  - Problemクラスのテスト
  - Attemptクラスのテスト
  - UUID採番のテスト
  - 正規化機能のテスト
- `test_storage.py`: ストレージ機能のテスト
  - CSV読み書きのテスト
  - 重複チェックのテスト
  - エラーハンドリングのテスト
- `test_rendering.py`: レンダリング機能のテスト
  - 置換機能のテスト
  - プレビュー生成のテスト
  - 境界値テスト
- `test_print_page.py`: 印刷用ページ生成機能のテスト
  - 印刷用HTML生成のテスト
  - テンプレート処理のテスト
  - レイアウトのテスト
- `test_validators.py`: バリデーション機能のテスト
  - 入力チェックのテスト
  - エラーケースのテスト
- `test_utils.py`: ユーティリティ機能のテスト
  - 日時処理のテスト
  - 文字列正規化のテスト

### docs/
- `reference/`: リファレンスドキュメント（保護対象）
  - `apple_GUI_guidline_color.md`: Apple GUIガイドライン（色）
  - `apple_GUI_guidline_layout.md`: Apple GUIガイドライン（レイアウト）
- `directorystructure.md`: ディレクトリ構造ドキュメント
- `implementation.md`: 実装ノート
- `Kanji Test Generator要件定義・設計ドラフト.md`: 要件定義・設計ドラフト
- `naming_conventions.md`: 命名規則
- `tag_history.md`: タグ履歴
- `アプリ素案.md`: アプリケーション素案

### .streamlit/
- `config.toml`: Streamlit設定
  - テーマ設定
  - レイアウト設定
  - その他のStreamlit固有設定

## 重要な注意事項

### リファレンスディレクトリの保護
- `docs/reference/`ディレクトリ内のファイルは読み取り専用として扱う
- 編集が必要な場合は、別のディレクトリにコピーしてから編集する
- 元のファイルは常に参照用として保持する

### データファイルの管理
- `data/`ディレクトリ内のCSVファイルは初回起動時に自動生成される
- 問題データと試行ログは分離して管理する
- 文字コードはUTF-8（BOMなし）で統一する

### フォントファイルの配置
- `assets/`ディレクトリに日本語フォントを配置する
- PDF生成時にフォントが埋め込まれるため、適切な配置が重要

### テストコードの配置
- 各モジュールに対応するテストファイルを作成する
- テスト駆動開発（TDD）を実践する
- カバレッジ80%以上を目標とする